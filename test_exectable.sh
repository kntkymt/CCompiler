#!/bin/bash
assert() {
  expected="$1"
  input="$2"

  ./.build/release/ccompiler "./ExecutableTests/$input" -o output.s
  clang -o output output.s
  ./output
  actual="$?"

  if [ "$actual" = "$expected" ]; then
    echo "$input => $actual"
  else
    echo "$input => $expected expected, but got $actual"
    exit 1
  fi
}

assert 0 "0.c"
assert 42 "1.c"
assert 21 "2.c"
assert 200 "3.c"
assert 41 "4.c"
assert 47 "5.c"
assert 15 "6.c"
assert 4 "7.c"
assert 10 "8.c"
assert 1 "9.c"
assert 1 "10.c"
assert 1 "11.c"
assert 1 "12.c"
assert 1 "13.c"
assert 1 "14.c"
assert 5 "15.c"
assert 6 "16.c"
assert 2 "17.c"
assert 6 "18.c"
assert 14 "19.c"
assert 15 "20.c"
assert 1 "21.c"
assert 12 "22.c"
assert 10 "23.c"
assert 0 "24.c"
assert 20 "25.c"
assert 30 "26.c"
assert 30 "27.c"
assert 15 "28.c"
assert 12 "29.c"
assert 10 "30.c"
assert 20 "31.c"
assert 30 "32.c"
assert 12 "33.c"
assert 5 "34.c"
assert 6 "35.c"
assert 3 "36.c"
assert 12 "37.c"
assert 74 "38.c"
assert 5 "39.c"
assert 5 "40.c"
assert 5 "41.c"
assert 10 "42.c"
assert 20 "43.c"
assert 30 "44.c"
assert 5 "45.c"
assert 10 "46.c"
assert 15 "47.c"
assert 8 "48.c"
assert 8 "49.c"
assert 8 "50.c"
assert 80 "51.c"
assert 1 "52.c"
assert 2 "53.c"
assert 1 "54.c"
assert 5 "55.c"
assert 3 "56.c"
assert 5 "57.c"
assert 8 "58.c"
assert 17 "59.c"
assert 5 "60.c"
assert 5 "61.c"
assert 1 "62.c"
assert 10 "63.c"
assert 100 "64.c"
assert 30 "65.c"
assert 30 "66.c"
assert 10 "67.c"
assert 30 "68.c"
assert 3 "69.c"
assert 15 "70.c"
assert 3 "71.c"
assert 150 "72.c"
assert 22 "73.c"
assert 97 "74.c"
assert 0 "75.c"
assert 101 "76.c"
assert 104 "77.c"

echo OK
